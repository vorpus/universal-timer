<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Time Tracker</title>
</head>
<body>
  <div class="context-menu" id="context-menu" style="display: none;">
    <div class="context-menu-item" id="context-menu-rename">Rename</div>
    <div class="context-menu-item context-menu-danger" id="context-menu-delete">Delete</div>
  </div>
  <div class="toast-container" id="toast-container"></div>
  <div class="container">
    <div class="drag-bar"></div>
    <!-- Tab navigation -->
    <div class="tabs">
      <button class="tab active" data-tab="timers">Timers</button>
      <button class="tab" data-tab="metrics">Metrics</button>
      <button class="tab" data-tab="settings">Settings</button>
      <button class="pin-btn" id="pin-btn" title="Pin window">
        <svg class="pin-icon pin-icon-inactive" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M560-760H400v87L290-783q-5-5-7.5-11t-2.5-12q0-13 9-23.5t24-10.5h327q17 0 28.5 11.5T680-800q0 16-14.5 22.5T640-760v240q0 17-11.5 28.5T600-480q-17 0-28.5-11.5T560-520v-240ZM440-80v-240H296q-25 0-40-17.5T241-377q0-11 4.5-22t14.5-21l60-60v-46L84-764q-11-11-11.5-27.5T84-820q11-11 28-11t28 11l679 679q12 12 11.5 28.5T818-84q-12 11-28 11.5T762-84L526-320h-6v240q0 17-11.5 28.5T480-40q-17 0-28.5-11.5T440-80Zm-86-320h92l-44-44-2-2-46 46Zm126-193Zm-78 149Z"/></svg>
        <svg class="pin-icon pin-icon-active" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M640-760v280l68 68q6 6 9 13.5t3 15.5v23q0 17-11.5 28.5T680-320H520v234q0 17-11.5 28.5T480-46q-17 0-28.5-11.5T440-86v-234H280q-17 0-28.5-11.5T240-360v-23q0-8 3-15.5t9-13.5l68-68v-280q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760ZM354-400h252l-46-46v-314H400v314l-46 46Zm126 0Z"/></svg>
      </button>
    </div>

    <!-- Timers tab -->
    <div class="tab-content active" id="timers-tab">
      <div class="timer-list" id="timer-list">
        <div class="empty-state">
          <p>No timers yet</p>
          <p>Click "Add Timer" below to start</p>
        </div>
      </div>
      <div class="add-timer-section">
        <button class="add-timer-btn" id="add-timer-btn">+ Add Timer</button>
        <div class="add-timer-input-wrapper" id="add-timer-wrapper">
          <div class="timer-input-container">
            <input type="text" class="timer-input" id="timer-input" placeholder="New timer name...">
          </div>
        </div>
      </div>
    </div>

    <!-- Metrics tab -->
    <div class="tab-content" id="metrics-tab">
      <div class="metrics-content">
        <div class="metric-card">
          <div class="metric-label">Today's Total</div>
          <div class="metric-value" id="total-time">0:00:00</div>
          <div class="metric-trend" id="weekly-trend"></div>
        </div>
        <div id="per-timer-stats"></div>
        <div class="timeline-container">
          <div class="timeline-label" id="timeline-label">Today's Timeline</div>
          <div class="timeline-bar" id="timeline-bar"></div>
          <div class="timeline-times" id="timeline-times"></div>
        </div>
      </div>
    </div>

    <!-- Settings tab -->
    <div class="tab-content" id="settings-tab">
      <div class="settings-content">
        <div class="settings-section">
          <div class="settings-section-title">Behavior</div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Pause others on start</div>
              <div class="setting-description">Only one timer runs at a time</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="pause-others" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Play sounds</div>
              <div class="setting-description">Audio feedback on timer events</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="play-sounds">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Show task number in tray</div>
              <div class="setting-description">Display 1-9 in menu bar for active timer</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="use-task-number-tray" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Show active task in tray</div>
              <div class="setting-description">Display timer name in menu bar</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="show-active-task-tray">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Show active time in tray</div>
              <div class="setting-description">Display elapsed time in menu bar</div>
            </div>
            <label class="toggle">
              <input type="checkbox" id="show-active-time-tray">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="settings-section">
          <div class="settings-section-title">Day Boundary</div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Day starts at</div>
              <div class="setting-description">When to reset daily metrics</div>
            </div>
            <input type="time" id="day-start" value="00:00" style="background: #333; border: none; color: #e0e0e0; padding: 6px 8px; border-radius: 4px;">
          </div>
        </div>

        <div class="settings-section">
          <div class="settings-section-title">Global Hotkeys</div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Pause all timers</div>
              <div class="setting-description">Stop all running timers</div>
            </div>
            <div class="hotkey-input-container">
              <input type="text" class="hotkey-input" id="pause-all-hotkey" readonly placeholder="Click to set">
              <button class="hotkey-clear" id="pause-all-clear" title="Clear hotkey">&times;</button>
            </div>
          </div>
          <div id="timer-hotkeys-container"></div>
        </div>

        <div class="settings-section">
          <div class="settings-section-title">Data</div>
          <div class="setting-row" style="flex-direction: column; align-items: flex-start; gap: 8px;">
            <div style="width: 100%; display: flex; justify-content: space-between; align-items: center;">
              <div>
                <div class="setting-label">Event log location</div>
              </div>
              <div style="display: flex; gap: 8px;">
                <button class="action-btn" id="change-path-btn" style="font-size: 12px; padding: 6px 12px;">Change</button>
                <button class="action-btn" id="reset-path-btn" style="font-size: 12px; padding: 6px 12px; background: #555;">Reset</button>
              </div>
            </div>
            <div class="setting-description" id="events-path" style="word-break: break-all; font-family: monospace; font-size: 11px;"></div>
          </div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Export data</div>
              <div class="setting-description">Save settings and timer history</div>
            </div>
            <button class="action-btn" id="export-btn">Export</button>
          </div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Import data</div>
              <div class="setting-description">Restore from backup file</div>
            </div>
            <button class="action-btn" id="import-btn">Import</button>
          </div>
        </div>

        <div class="settings-section">
          <div class="settings-section-title">Application</div>
          <div class="setting-row">
            <div>
              <div class="setting-label">Quit Time Tracker</div>
              <div class="setting-description">Exit the application</div>
            </div>
            <button class="action-btn danger" id="exit-btn">Exit</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./src/renderer.ts"></script>
</body>
</html>
